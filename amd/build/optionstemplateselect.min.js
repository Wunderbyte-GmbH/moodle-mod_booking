/**
 * AJAX helper for the inline editing a value.
 *
 * This script is automatically included from template core/inplace_editable
 * It registers a click-listener on [data-inplaceeditablelink] link (the "inplace edit" icon),
 * then replaces the displayed value with an input field. On "Enter" it sends a request
 * to web service core_update_inplace_editable, which invokes the specified callback.
 * Any exception thrown by the web service (or callback) is displayed as an error popup.
 *
 * @module     mod_booking/optionstemplateselect
 * @copyright  2019 Andraž Prinčič
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @since      4.5
 */
define("mod_booking/optionstemplateselect",["jquery","core/ajax"],(function($,ajax){return{init:function(){$("#id_optiontemplateid").change((function(){""!=$("#id_optiontemplateid").val()&&ajax.call([{methodname:"mod_booking_optiontemplate",args:{id:$("#id_optiontemplateid").val()},done:function(data){var obj=$.parseJSON(data.template);$("#id_text").val(obj.text),$("#id_titleprefix").val(obj.titleprefix),$("#id_invisible").val(obj.invisible),$("#id_annotation").val(obj.annotation),$("#id_location").val(obj.location),$("#id_institution").val(obj.institution),$("#id_address").val(obj.address),$("#id_limitanswers").is(":checked")!=(0!=obj.maxanswers)&&$("#id_limitanswers").trigger("click"),$("#id_maxanswers").val(obj.maxanswers),$("#id_maxoverbooking").val(obj.maxoverbooking),$("#id_minanswers").val(obj.minanswers),$("#id_restrictanswerperiodopening").is(":checked")!=(0!=obj.bookingopeningtime)&&$("#id_restrictanswerperiodopening").trigger("click"),$("#id_restrictanswerperiodclosing").is(":checked")!=(0!=obj.bookingclosingtime)&&$("#id_restrictanswerperiodclosing").trigger("click");var datebookingopeningtime=new Date(1e3*obj.bookingopeningtime);$("#id_bookingopeningtime_day").val(datebookingopeningtime.getDate()),$("#id_bookingopeningtime_month").val(datebookingopeningtime.getMonth()+1),$("#id_bookingopeningtime_year").val(datebookingopeningtime.getFullYear()),$("#id_bookingopeningtime_hour").val(datebookingopeningtime.getHours()),$("#id_bookingopeningtime_minute").val(datebookingopeningtime.getMinutes());var datebookingclosingtime=new Date(1e3*obj.bookingclosingtime);$("#id_bookingclosingtime_day").val(datebookingclosingtime.getDate()),$("#id_bookingclosingtime_month").val(datebookingclosingtime.getMonth()+1),$("#id_bookingclosingtime_year").val(datebookingclosingtime.getFullYear()),$("#id_bookingclosingtime_hour").val(datebookingclosingtime.getHours()),$("#id_bookingclosingtime_minute").val(datebookingclosingtime.getMinutes()),$("#id_courseid").val(obj.courseid);var x=obj.duration;switch(!0){case x<60:$("#id_duration_number").val(x),$("#id_duration_timeunit").val(1);break;case x<3600:$("#id_duration_number").val(x/60),$("#id_duration_timeunit").val(60);break;case x<86400:$("#id_duration_number").val(x/3600),$("#id_duration_timeunit").val(3600);break;case x<604800:$("#id_duration_number").val(x/86400),$("#id_duration_timeunit").val(86400);break;default:$("#id_duration_number").val(x/604800),$("#id_duration_timeunit").val(604800)}$("#id_startendtimeknown").is(":checked")!=(0!=obj.coursestarttime)&&$("#id_startendtimeknown").trigger("click"),$("#id_addtocalendar").val(obj.addtocalendar);var datecoursestarttime=new Date(1e3*obj.coursestarttime);$("#id_coursestarttime_day").val(datecoursestarttime.getDate()),$("#id_coursestarttime_month").val(datecoursestarttime.getMonth()+1),$("#id_coursestarttime_year").val(datecoursestarttime.getFullYear()),$("#id_coursestarttime_hour").val(datecoursestarttime.getHours()),$("#id_coursestarttime_minute").val(datecoursestarttime.getMinutes()),$("#id_enrolmentstatus").is(":checked")!=(0!=obj.enrolmentstatus)&&$("#id_enrolmentstatus").trigger("click");var datecourseendtime=new Date(1e3*obj.courseendtime);$("#id_courseendtime_day").val(datecourseendtime.getDate()),$("#id_courseendtime_month").val(datecourseendtime.getMonth()+1),$("#id_courseendtime_year").val(datecourseendtime.getFullYear()),$("#id_courseendtime_hour").val(datecourseendtime.getHours()),$("#id_courseendtime_minute").val(datecourseendtime.getMinutes()),$("#id_descriptioneditable").html(obj.description),$("#id_pollurl").val(obj.pollurl),$("#id_pollurlteachers").val(obj.pollurlteachers),$("#id_howmanyusers").val(obj.howmanyusers),$("#id_removeafterminutes").val(obj.removeafterminutes),$("#id_notificationtexteditable").html(obj.notificationtext),$("#id_disablebookingusers").val(obj.disablebookingusers),$("#id_beforebookedtexteditable").html(obj.beforebookedtext),$("#id_beforecompletedtexteditable").html(obj.beforecompletedtext),$("#id_aftercompletedtexteditable").html(obj.aftercompletedtext),$("#id_priceformulamultiply").val(obj.priceformulamultiply),$("#id_priceformulaadd").val(obj.priceformulaadd),$("#id_priceformulaoff").val(obj.priceformulaoff),$("#fitem_id_location .form-autocomplete-downarrow").trigger("click"),$("#fitem_id_institution .form-autocomplete-downarrow").trigger("click"),$("#fitem_id_courseid .badge").trigger("click"),$("#id_optiontemplateid").trigger("click"),$("#fitem_id_courseendtime .icon").trigger("click"),$("#fitem_id_courseendtime .icon").trigger("click")}}],!0)}))}}}));

//# sourceMappingURL=optionstemplateselect.min.js.map