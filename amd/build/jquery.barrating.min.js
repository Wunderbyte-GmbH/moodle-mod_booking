function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}(function(a){if("function"==typeof define&&define.amd){define ("mod_booking/jquery.barrating",["jquery"],a)}})(function(a){var b=function(){function b(){var b=this,c=function(){var c=["br-wrapper"];if(""!==b.options.theme){c.push("br-theme-"+b.options.theme)}b.$elem.wrap(a("<div />",{class:c.join(" ")}))},d=function(){b.$elem.unwrap()},e=function(c){if(a.isNumeric(c)){c=Math.floor(c)}return a("option[value=\""+c+"\"]",b.$elem)},f=function(){var c=b.options.initialRating;if(!c){return a("option:selected",b.$elem)}return e(c)},g=function(){var c=b.$elem.find("option[value=\""+b.options.emptyValue+"\"]");if(!c.length&&b.options.allowEmpty){c=a("<option />",{value:b.options.emptyValue});return c.prependTo(b.$elem)}return c},h=function(a){var c=b.$elem.data("barrating");if("undefined"!=typeof a){return c[a]}return c},i=function(a,c){if(null!==c&&"object"===_typeof(c)){b.$elem.data("barrating",c)}else{b.$elem.data("barrating")[a]=c}},j=function(){var a=f(),c=g(),d=a.val(),e=a.data("html")?a.data("html"):a.text(),h=null!==b.options.allowEmpty?b.options.allowEmpty:!!c.length,j=c.length?c.val():null,k=c.length?c.text():null;i(null,{userOptions:b.options,ratingValue:d,ratingText:e,originalRatingValue:d,originalRatingText:e,allowEmpty:h,emptyRatingValue:j,emptyRatingText:k,readOnly:b.options.readonly,ratingMade:!1})},k=function(){b.$elem.removeData("barrating")},l=function(){return h("ratingText")},m=function(){return h("ratingValue")},n=function(){var c=a("<div />",{class:"br-widget"});b.$elem.find("option").each(function(){var d,e,f,g;d=a(this).val();if(d!==h("emptyRatingValue")){e=a(this).text();f=a(this).data("html");if(f){e=f}g=a("<a />",{href:"#","data-rating-value":d,"data-rating-text":e,html:b.options.showValues?e:""});c.append(g)}});if(b.options.showSelectedRating){c.append(a("<div />",{text:"",class:"br-current-rating"}))}if(b.options.reverse){c.addClass("br-reverse")}if(b.options.readonly){c.addClass("br-readonly")}return c},o=function(){if(h("userOptions").reverse){return"nextAll"}else{return"prevAll"}},p=function(a){e(a).prop("selected",!0);if(h("userOptions").triggerChange){b.$elem.change()}},q=function(){a("option",b.$elem).prop("selected",function(){return this.defaultSelected});if(h("userOptions").triggerChange){b.$elem.change()}},r=function(a){a=a?a:l();if(a==h("emptyRatingText")){a=""}if(b.options.showSelectedRating){b.$elem.parent().find(".br-current-rating").text(a)}},s=function(a){return Math.round(100*(Math.floor(10*a)/10%1))},t=function(){b.$widget.find("a").removeClass(function(a,b){return(b.match(/(^|\s)br-\S+/g)||[]).join(" ")})},u=function(){var c=b.$widget.find("a[data-rating-value=\""+m()+"\"]"),d=h("userOptions").initialRating,e=a.isNumeric(m())?m():0,g=s(d),f,i;t();c.addClass("br-selected br-current")[o()]().addClass("br-selected");if(!h("ratingMade")&&a.isNumeric(d)){if(d<=e||!g){return}f=b.$widget.find("a");if(c.length){i=c[h("userOptions").reverse?"prev":"next"]()}else{i=f[h("userOptions").reverse?"last":"first"]()}i.addClass("br-fractional");i.addClass("br-fractional-"+g)}},v=function(a){if(!h("allowEmpty")||!h("userOptions").deselectable){return!1}return m()==a.attr("data-rating-value")},w=function(c){c.on("click.barrating",function(c){var d=a(this),e=h("userOptions"),f,g;c.preventDefault();f=d.attr("data-rating-value");g=d.attr("data-rating-text");if(v(d)){f=h("emptyRatingValue");g=h("emptyRatingText")}i("ratingValue",f);i("ratingText",g);i("ratingMade",!0);p(f);r(g);u();e.onSelect.call(b,m(),l(),c);return!1})},x=function(c){c.on("mouseenter.barrating",function(){if(!b.options.initialRating){var c=a(this);t();c.addClass("br-active")[o()]().addClass("br-active");r(c.attr("data-rating-text"))}})},y=function(){b.$widget.on("mouseleave.barrating blur.barrating",function(){r();u()})},z=function(b){b.on("touchstart.barrating",function(b){b.preventDefault();b.stopPropagation();a(this).click()})},A=function(a){a.on("click.barrating",function(a){a.preventDefault()})},B=function(a){w(a);if(b.options.hoverState){x(a);y(a)}},C=function(a){a.off(".barrating")},D=function(a){var c=b.$widget.find("a");if(h("userOptions").fastClicks){z(c)}if(a){C(c);A(c)}else{B(c)}};this.show=function(){if(h()){return}c();j();b.$widget=n();b.$widget.insertAfter(b.$elem);u();r();D(b.options.readonly);b.$elem.hide()};this.readonly=function(a){if("boolean"!=typeof a||h("readOnly")==a){return}D(a);i("readOnly",a);b.$widget.toggleClass("br-readonly")};this.set=function(a){var c=h("userOptions");if(0===b.$elem.find("option[value=\""+a+"\"]").length){return}i("ratingValue",a);i("ratingText",b.$elem.find("option[value=\""+a+"\"]").text());i("ratingMade",!0);p(m());r(l());u();if(!c.silent){c.onSelect.call(this,m(),l())}};this.clear=function(){var a=h("userOptions");i("ratingValue",h("originalRatingValue"));i("ratingText",h("originalRatingText"));i("ratingMade",!1);q();r(l());u();a.onClear.call(this,m(),l())};this.destroy=function(){var a=m(),c=l(),e=h("userOptions");C(b.$widget.find("a"));b.$widget.remove();k();d();b.$elem.show();e.onDestroy.call(this,a,c)}}b.prototype.init=function(b,c){this.$elem=a(c);this.options=a.extend({},a.fn.barrating.defaults,b);return this.options};return b}();a.fn.barrating=function(c,d){return this.each(function(){var e=new b;if(!a(this).is("select")){a.error("Sorry, this plugin only works with select fields.")}if(e.hasOwnProperty(c)){e.init(d,this);if("show"===c){return e.show(d)}else{if(e.$elem.data("barrating")){e.$widget=a(this).next(".br-widget");return e[c](d)}}}else if("object"===_typeof(c)||!c){d=c;e.init(d,this);return e.show()}else{a.error("Method "+c+" does not exist on jQuery.barrating")}})};a.fn.barrating.defaults={theme:"",initialRating:null,allowEmpty:null,emptyValue:"",showValues:!1,showSelectedRating:!0,deselectable:!0,reverse:!1,readonly:!1,fastClicks:!0,hoverState:!0,silent:!1,triggerChange:!0,onSelect:function onSelect(a,b,c){a=b;a=c},onClear:function onClear(a,b){a=b},onDestroy:function onDestroy(a,b){a=b}};a.fn.barrating.BarRating=b});
//# sourceMappingURL=jquery.barrating.min.js.map
