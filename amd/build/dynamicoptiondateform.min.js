define("mod_booking/dynamicoptiondateform",["exports","core_form/dynamicform","core/templates"],(function(_exports,_dynamicform,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/*
   * @package    mod_booking
   * @copyright  Wunderbyte GmbH <info@wunderbyte.at>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=_exports.datelistinit=void 0,_dynamicform=_interopRequireDefault(_dynamicform),_templates=_interopRequireDefault(_templates);var optiondateForm=new _dynamicform.default(document.querySelector("#optiondates-form"),"mod_booking\\form\\optiondate_form");_exports.init=function(cmid,bookingid,optionid){optiondateForm.load({cmid:cmid,bookingid:bookingid,optionid:optionid}).then((function(){datelistinit()})).catch((function(ex){return displayException(ex)})),optiondateForm.addEventListener(optiondateForm.events.FORM_SUBMITTED,(function(e){var chooseperiodvalue=document.getElementsByName("chooseperiod")[0].value,reoccurringdatestringvalue=document.getElementsByName("reoccurringdatestring")[0].value;optiondateForm.load({cmid:cmid,bookingid:bookingid,optionid:optionid}).then((function(){e.preventDefault();var response=e.detail;_templates.default.renderForPromise("mod_booking/bookingoption_dates",response).then((function(_ref){var html=_ref.html;document.querySelector(".optiondates-list").innerHTML="",_templates.default.appendNodeContents(".optiondates-list",html)})).catch((function(ex){return displayException(ex)}));for(var oldlists=document.getElementsByClassName("optiondates-list");oldlists.length>1;)oldlists[oldlists.length-1].parentNode.removeChild(oldlists[oldlists.length-1]);datelistinit(),document.getElementsByName("chooseperiod")[0].value=chooseperiodvalue,document.getElementsByName("reoccurringdatestring")[0].value=reoccurringdatestringvalue,document.querySelector("#semesterid").value=chooseperiodvalue,document.querySelector("#dayofweektime").value=reoccurringdatestringvalue})).catch((function(ex){return displayException(ex)}))}))};var datelistinit=function(){var dateform=document.querySelector("#optiondates-form"),datelist=document.querySelector(".optiondates-list");datelist.parentNode.removeChild(datelist),dateform.parentNode.insertBefore(datelist,dateform.nextSibling),datelist.addEventListener("click",(function(e){var action=e.target.dataset.action,targetid=e.target.dataset.targetid;if("delete"===action&&(e.target.closest("li").remove(),document.getElementById(targetid).remove()),"add"===action){var targetElement=e.target.closest("li"),element='<li><span class="badge bg-primary">'+document.querySelector("#meeting-time").value+'</span> <i class="fa fa-trash ml-2 icon-red" data-action="delete"></i></li>';targetElement.insertAdjacentHTML("afterend",element)}})),document.getElementsByName("chooseperiod")[0].addEventListener("change",(function(e){document.querySelector("#semesterid").value=e.target.value})),document.getElementsByName("reoccurringdatestring")[0].addEventListener("keyup",(function(e){document.querySelector("#dayofweektime").value=e.target.value}))};_exports.datelistinit=datelistinit}));

//# sourceMappingURL=dynamicoptiondateform.min.js.map