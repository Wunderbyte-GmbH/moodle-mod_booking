define(["jquery","core/config","mod_booking/jquery.barrating"],function(a,b){return{setup:function(c){a(".starrating").each(function(d,e){var f=a(this).data("current-rating"),g=a(this).data("itemid");e||(e="");var h=this;a(this).barrating({initialRating:f,theme:"css-stars",onSelect:function(d,e,f){"undefined"!=typeof f&&a.ajax({url:b.wwwroot+"/mod/booking/rating_rest.php?id="+c,method:"POST",data:{optionid:g,value:d}}).done(function(b){a(h).barrating("readonly",!0),a(h).barrating("set",b.rate)})}})}),a("#showHideSearch").on("click",function(){a("#tableSearch").fadeToggle("slow","linear"),a("html, body").animate({scrollTop:a("#tableSearch").offset().top-120},1e3)}),a(".showHideOptionText").on("click",function(){a("#optiontext"+a(this).data("id")).fadeToggle("slow","linear"),a("#showtext"+a(this).data("id")).toggle(),a("#hidetext"+a(this).data("id")).toggle(),a("html, body").animate({scrollTop:a("#optiontext"+a(this).data("id")).offset().top-120},1e3)}),a("#page-mod-booking-view #buttonclear").on("click",function(){a("#searchtext, #searchlocation, #searchinstitution, #searchname, #searchsurname").val(""),a("#searchButton").trigger("click")}),a("#page-mod-booking-report #buttonclear").on("click",function(){a("#menusearchwaitinglist, #menusearchfinished, #searchdate").val(""),a("#searchButton").trigger("click")}),a("#page-mod-booking-report #usercheckboxall").click(function(){a("#studentsform input:checkbox").not(this).prop("checked",this.checked)}),a("#page-mod-booking-report #menuratingall").change(function(){a("#studentsform input:checkbox").not(this).prop("checked","checked");var b=a(this).val();a('.booking-option-rating .postratingmenu.ratinginput [value="'+b+'"]').attr("selected",!0)}),a("#page-mod-booking-report .booking-option-rating .ratinginput").change(function(){var b=a(this).attr("id"),c=b.replace(/\D/g,"");a("#studentsform [id=check"+c+"]").prop("checked","checked")})}}});