/**
 * Javascript controller for booking module
 *
 * @module mod_booking/view_actions
 * @package
 * @copyright 2017 David Bogner <info@edulabs.org>
 * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @since 3.1
 */
define("mod_booking/view_actions",["jquery","core/config","mod_booking/jquery.barrating"],(function($,mdlconfig){return{setup:function(id){$(".starrating").each((function(index,value){var currentrating=$(this).data("current-rating"),itemid=$(this).data("itemid");value||(value="");var thisid=this;$(this).barrating({initialRating:currentrating,theme:"css-stars",onSelect:function(value,text,event){void 0!==event&&$.ajax({url:mdlconfig.wwwroot+"/mod/booking/rating_rest.php?id="+id,method:"POST",data:{optionid:itemid,value:value}}).done((function(data){$(thisid).barrating("readonly",!0),$(thisid).barrating("set",data.rate)}))}})})),$("#showHideSearch").on("click",(function(){$("#tableSearch").fadeToggle("slow","linear"),$("html, body").animate({scrollTop:$("#tableSearch").offset().top-120},1e3)})),$(".showHideOptionText").on("click",(function(){$("#optiontext"+$(this).data("id")).fadeToggle("slow","linear"),$("#showtext"+$(this).data("id")).toggle(),$("#hidetext"+$(this).data("id")).toggle(),$("html, body").animate({scrollTop:$("#optiontext"+$(this).data("id")).offset().top-120},1e3)})),$("#page-mod-booking-view #buttonclear").on("click",(function(){$("#searchtext, #searchlocation, #searchinstitution, #searchname, #searchsurname").val(""),$("#searchButton").trigger("click")})),$("#page-mod-booking-report #buttonclear").on("click",(function(){$("#menusearchwaitinglist, #menusearchfinished, #searchdate").val(""),$("#searchButton").trigger("click")})),$("#page-mod-booking-report #usercheckboxall").click((function(){$("#studentsform input:checkbox").not(this).prop("checked",this.checked)})),$("#page-mod-booking-report #menuratingall").change((function(){$("#studentsform input:checkbox").not(this).prop("checked","checked");var selected=$(this).val();$('.booking-option-rating .postratingmenu.ratinginput [value="'+selected+'"]').attr("selected",!0)})),$("#page-mod-booking-report .booking-option-rating .ratinginput").change((function(){var selected=$(this).attr("id").replace(/\D/g,"");$("#studentsform [id=check"+selected+"]").prop("checked","checked")}))}}}));

//# sourceMappingURL=view_actions.min.js.map
