define("mod_booking/dynamiccampaignsform",["exports","core/str","core_form/modalform"],(function(_exports,_str,_modalform){var obj;
/**
   * Dynamic campaigns form.
   * @module     mod_booking/dynamiccampaignsform
   * @copyright  2023 Wunderbyte GmbH <info@wunderbyte.at>
   * @author     Bernhard Fischer
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modalform=(obj=_modalform)&&obj.__esModule?obj:{default:obj};_exports.init=selector=>{document.querySelector(selector).addEventListener("click",(e=>{!function(element){if(!element)return;const campaignid=element.dataset.id,bookingcampaigntype=element.dataset.bookingcampaigntype,action=element.dataset.action,name=element.dataset.name;if(!campaignid)return;if("delete"==action){console.log("delete");const deleteForm=new _modalform.default({formClass:"mod_booking\\form\\deletecampaignform",args:{id:campaignid,bookingcampaigntype:bookingcampaigntype,name:name},modalConfig:{title:(0,_str.get_string)("deletebookingcampaign","mod_booking")},returnFocus:element});deleteForm.addEventListener(deleteForm.events.FORM_SUBMITTED,(()=>{window.location.reload()})),deleteForm.show()}else{if("edit-or-new"!=action)return void console.log('Error in dynamiccampaignsform.js: action should be "delete" or "edit-or-new".');{console.log("editornew");const modalForm=new _modalform.default({formClass:"mod_booking\\form\\campaignsform",args:{id:campaignid,bookingcampaigntype:bookingcampaigntype},modalConfig:{title:(0,_str.get_string)("editcampaign","mod_booking")},returnFocus:element});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(()=>{window.location.reload()})),modalForm.addEventListener("change",(e=>{if(console.log("change detected: ",e),e.target.name){if("bookingcampaigntype"==e.target.name){console.log("change in bookingcampaigntype"),window.skipClientValidation=!0;let button=document.querySelector('[name="btn_bookingcampaigntype"]');modalForm.processNoSubmitButton(button)}if("bofieldname"==e.target.name){console.log("change in booking option fieldname"),window.skipClientValidation=!0;let button=document.querySelector('[name="btn_bofieldname"]');modalForm.processNoSubmitButton(button)}if("cpfield"==e.target.name){console.log("change in user profile field"),window.skipClientValidation=!0;let button=document.querySelector('[name="btn_cpfield"]');modalForm.processNoSubmitButton(button)}}})),modalForm.show()}}}(e.target)}))}}));

//# sourceMappingURL=dynamiccampaignsform.min.js.map