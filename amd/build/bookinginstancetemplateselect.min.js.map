{"version":3,"sources":["../src/bookinginstancetemplateselect.js"],"names":["define","$","ajax","init","change","val","call","methodname","args","id","done","data","obj","parseJSON","template","name","eventtype","html","intro","duration","points","organizatorname","pollurl","pollurlteachers","whichview","defaultoptionsort","enablepresence","templateid","sendmail","copymail","sendmailtobooker","daystonotify","daystonotify2","bookedtext","waitingtext","notifyemail","statuschangetext","userleave","deletedtext","pollurltext","pollurlteacherstext","notificationtext","btncacname","lblteachname","lblsputtname","btnbooknowname","btncancelname","lblbooking","lbllocation","lblinstitution","lblname","lblsurname","booktootherbooking","lblacceptingfrom","lblnumofusers","bookingpolicy","cancancelbook","allowupdate","allowupdatedays","autoenrol","addtogroup","maxperuser","showinapi","numgenerator","paginationnum","banusernames","showhelpfullnavigationlinks","completionmodule","comments","ratings","removeuseronunenrol","JSON","parse","categoryid","beforecompletedtext","aftercompletedtext","beforebookedtext","conectedbooking","teacherroleid","assessed"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * AJAX helper for the inline editing a value.\n *\n * This script is automatically included from template core/inplace_editable\n * It registers a click-listener on [data-inplaceeditablelink] link (the \"inplace edit\" icon),\n * then replaces the displayed value with an input field. On \"Enter\" it sends a request\n * to web service core_update_inplace_editable, which invokes the specified callback.\n * Any exception thrown by the web service (or callback) is displayed as an error popup.\n *\n * @module     mod_booking/bookinginstancetemplateselect\n * @package    mod_booking\n * @copyright  2019 Andraž Prinčič\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @since      4.5\n */\n\ndefine(['jquery', 'core/ajax'], function($, ajax) {\n\n    return {\n        init: function() {\n\n            // Put whatever you like here. $ is available\n            // to you as normal.\n            $(\"#id_instancetemplateid\").change(function() {\n                if ($(\"#id_instancetemplateid\").val() != '') {\n                    ajax\n                    .call([{\n                        methodname: 'mod_booking_instancetemplate',\n                        args: {\n                            id: $(\"#id_instancetemplateid\").val()\n                        },\n                        done: function(data) {\n                            var obj = $.parseJSON(data.template);\n\n                            // General\n                            $(\"#id_name\").val(obj.name);\n                            $(\"#id_eventtype\").val(obj.eventtype);\n                            $(\"#id_introeditoreditable\").html(obj.intro);\n                            $('#id_duration').val(obj.duration);\n                            $('#id_points').val(obj.points);\n                            $('#id_organizatorname').val(obj.organizatorname);\n                            $('#id_pollurl').val(obj.pollurl);\n                            $('#id_pollurlteachers').val(obj.pollurlteachers);\n                            $('#id_whichview').val(obj.whichview);\n                            $('#id_defaultoptionsort').val(obj.defaultoptionsort);\n                            $('#id_enablepresence').val(obj.enablepresence);\n                            $('#id_templateid').val(obj.templateid);\n\n                            // Confirmation e-mail settings\n                            $('#id_sendmail').val(obj.sendmail);\n                            $('#id_copymail').val(obj.copymail);\n                            $('#id_sendmailtobooker').val(obj.sendmailtobooker);\n                            $('#id_daystonotify').val(obj.daystonotify);\n                            $('#id_daystonotify2').val(obj.daystonotify2);\n                            // $('#id_bookingmanager').val(obj.bookingmanager);\n                            $('#id_bookedtexteditable').html(obj.bookedtext);\n                            $('#id_waitingtexteditable').html(obj.waitingtext);\n                            $('#id_notifyemaileditable').html(obj.notifyemail);\n                            $('#id_statuschangetexteditable').html(obj.statuschangetext);\n                            $('#id_userleaveeditable').html(obj.userleave);\n                            $('#id_deletedtexteditable').html(obj.deletedtext);\n                            $('#id_pollurltexteditable').html(obj.pollurltext);\n                            $('#id_pollurlteacherstexteditable').html(obj.pollurlteacherstext);\n                            $('#id_notificationtexteditable').html(obj.notificationtext);\n\n                            // Custom labels\n                            $('#id_btncacname').val(obj.btncacname);\n                            $('#id_lblteachname').val(obj.lblteachname);\n                            $('#id_lblsputtname').val(obj.lblsputtname);\n                            $('#id_btnbooknowname').val(obj.btnbooknowname);\n                            $('#id_btncancelname').val(obj.btncancelname);\n                            $('#id_lblbooking').val(obj.lblbooking);\n                            $('#id_lbllocation').val(obj.lbllocation);\n                            $('#id_lblinstitution').val(obj.lblinstitution);\n                            $('#id_lblname').val(obj.lblname);\n                            $('#id_lblsurname').val(obj.lblsurname);\n                            $('#id_booktootherbooking').val(obj.booktootherbooking);\n                            $('#id_lblacceptingfrom').val(obj.lblacceptingfrom);\n                            $('#id_lblnumofusers').val(obj.lblnumofusers);\n\n                            // Miscellaneous settings\n                            $('#id_bookingpolicyeditable').html(obj.bookingpolicy);\n                            $('#id_cancancelbook').val(obj.cancancelbook);\n                            $('#id_allowupdate').val(obj.allowupdate);\n                            $('#id_allowupdatedays').val(obj.allowupdatedays);\n                            $('#id_autoenrol').val(obj.autoenrol);\n                            $('#id_addtogroup').val(obj.addtogroup);\n                            $('#id_maxperuser').val(obj.maxperuser);\n                            $('#id_showinapi').val(obj.showinapi);\n                            $('#id_numgenerator').val(obj.numgenerator);\n                            $('#id_paginationnum').val(obj.paginationnum);\n                            $('#id_banusernames').val(obj.banusernames);\n                            $('#id_showhelpfullnavigationlinks').val(obj.showhelpfullnavigationlinks);\n                            $('#id_completionmodule').val(obj.completionmodule);\n                            $('#id_comments').val(obj.comments);\n                            $('#id_ratings').val(obj.ratings);\n                            $('#id_removeuseronunenrol').val(obj.removeuseronunenrol);\n\n                            // Category\n                            $(\"#id_categoryid\").val(JSON.parse(\"[\" + obj.categoryid + \"]\"));\n\n                            // Fields to display in different contexts\n                            // $(\"#id_signinsheetfields\").val(JSON.parse(\"[\" + obj.signinsheetfields + \"]\")).change();\n\n                            // TO-DO :Create backup!\n                            // TO-DO: Fields still to add:\n                            // - assesstimefinish\n                            // - assesstimestart\n                            // - course\n                            // - enablecompletion\n                            // - optionsfields\n                            // - reportfields\n                            // - responsesfields\n                            // - scale\n                            // - signinsheetfields\n                            // - timeclose\n                            // - timemodified\n                            // - timeopen\n\n                            // Booking option text depending on booking status\n                            $('#id_beforecompletedtexteditable').html(obj.beforecompletedtext);\n                            $('#id_aftercompletedtexteditable').html(obj.aftercompletedtext);\n                            $('#id_beforebookedtexteditable').html(obj.beforebookedtext);\n\n                            // Connected booking\n                            $('#id_conectedbooking').val(obj.conectedbooking);\n\n                            // Teachers\n                            $('#id_teacherroleid').val(obj.teacherroleid);\n\n                            // Ratings\n                            $('#id_assessed').val(obj.assessed);\n                        }\n                    }], true);\n                }\n            });\n        }\n    };\n});"],"file":"bookinginstancetemplateselect.min.js"}
